{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/group-details.css' %}">
{% endblock %}
{% block content %}
<section class="group-detail-container">
  <div class="group-header">
    {% if group.logo %}
      <img src="{{ group.logo.url }}" alt="{{ group.name }} logo" class="group-logo">
    {% endif %}
    <h1>{{ group.name }}</h1>
    <div class="group-info">
      <p><strong>Country:</strong> {{ group.country }}</p>
      <p><strong>Founded:</strong> {{ group.founding_year }}</p>
      <p>{{ group.description }}</p>
    </div>
    <div class="group-actions">
      <a href="{% url 'group-update' group.id %}" class="btn warn">Edit</a>
      <a href="{% url 'group-delete' group.id %}" class="btn danger">Delete</a>
    </div>
  </div>

  <div class="tifo-section">
    <div class="tifo-header">
      <h2>Tifos</h2>
      <a href="{% url 'tifo-create' group.id %}" class="btn btn-success">Add Tifo</a>
    </div>

    {% if group.tifo_set.exists %}
      <div class="tifo-grid">
        {% for tifo in group.tifo_set.all %}
          <div class="tifo-card">
            <p><strong>Match:<br></strong> {{ tifo.match }}</p>
            <a href="{% url 'tifo-detail' tifo.id %}">
              {% if tifo.picture %}
                <img src="{{ tifo.picture.url }}" alt="{{ tifo.get_tifo_type_display }} tifo">
              {% else %}
                <img src="{% static 'images/placeholder.png' %}" alt="No tifo image">
              {% endif %}
            </a>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="no-tifos">⚠️ This group has not created any tifos yet.</p>
    {% endif %}

    <a href="{% url 'country-detail' group.country.id %}" class="btn btn-secondary">
      See All {{ group.country.name }} Groups
    </a>
  </div>
</section>
{% endblock %}
